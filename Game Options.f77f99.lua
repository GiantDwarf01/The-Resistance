baseNote = ""
label_radio = '\u{25CF}'
label_check = '\u{2713}'

exp_avalon = {}
exp_avalon.click_function = 'explain_avalon'
exp_avalon.function_owner = self
exp_avalon.label = '?'
exp_avalon.position = {-5, 0.6, -5.25}
exp_avalon.width = 400
exp_avalon.height = 400
exp_avalon.font_size = 400

add_avalon = {}
add_avalon.click_function = 'select_avalon'
add_avalon.function_owner = self
add_avalon.label = ' '
add_avalon.position = {-6, 0.6, -5.25}
add_avalon.width = 400
add_avalon.height = 400
add_avalon.font_size = 400

exp_plot = {}
exp_plot.click_function = 'explain_plot'
exp_plot.function_owner = self
exp_plot.label = '?'
exp_plot.position = {-5, 0.6, -3.95}
exp_plot.width = 400
exp_plot.height = 400
exp_plot.font_size = 400

add_plot = {}
add_plot.click_function = 'select_plot'
add_plot.function_owner = self
add_plot.label = ' '
add_plot.position = {-6, 0.6, -3.95}
add_plot.width = 400
add_plot.height = 400
add_plot.font_size = 400

exp_addplot = {}
exp_addplot.click_function = 'explain_addplot'
exp_addplot.function_owner = self
exp_addplot.label = '?'
exp_addplot.position = {-5, 0.6, -3}
exp_addplot.width = 400
exp_addplot.height = 400
exp_addplot.font_size = 400

add_addplot = {}
add_addplot.click_function = 'select_addplot'
add_addplot.function_owner = self
add_addplot.label = ' '
add_addplot.position = {-6, 0.6, -3}
add_addplot.width = 400
add_addplot.height = 400
add_addplot.font_size = 400

exp_blind = {}
exp_blind.click_function = 'explain_blind'
exp_blind.function_owner = self
exp_blind.label = '?'
exp_blind.position = {-5, 0.6, -1.95}
exp_blind.width = 400
exp_blind.height = 400
exp_blind.font_size = 400

add_blind = {}
add_blind.click_function = 'select_blind'
add_blind.function_owner = self
add_blind.label = ' '
add_blind.position = {-6, 0.6, -1.95}
add_blind.width = 400
add_blind.height = 400
add_blind.font_size = 400

exp_inq = {}
exp_inq.click_function = 'explain_inq'
exp_inq.function_owner = self
exp_inq.label = '?'
exp_inq.position = {-5, 0.6, 1.75}
exp_inq.width = 400
exp_inq.height = 400
exp_inq.font_size = 400

add_inq = {}
add_inq.click_function = 'select_inq'
add_inq.function_owner = self
add_inq.label = ' '
add_inq.position = {-6, 0.6, 1.75}
add_inq.width = 400
add_inq.height = 400
add_inq.font_size = 400

exp_trapper = {}
exp_trapper.click_function = 'explain_trapper'
exp_trapper.function_owner = self
exp_trapper.label = '?'
exp_trapper.position = {-5, 0.6, -0.75}
exp_trapper.width = 400
exp_trapper.height = 400
exp_trapper.font_size = 400

add_trapper = {}
add_trapper.click_function = 'select_trapper'
add_trapper.function_owner = self
add_trapper.label = ' '
add_trapper.position = {-6, 0.6, -0.75}
add_trapper.width = 400
add_trapper.height = 400
add_trapper.font_size = 400

exp_choice = {}
exp_choice.click_function = 'explain_choice'
exp_choice.function_owner = self
exp_choice.label = '?'
exp_choice.position = {-5, 0.6, 0.5}
exp_choice.width = 400
exp_choice.height = 400
exp_choice.font_size = 400

add_choice = {}
add_choice.click_function = 'select_choice'
add_choice.function_owner = self
add_choice.label = ' '
add_choice.position = {-6, 0.6, 0.5}
add_choice.width = 400
add_choice.height = 400
add_choice.font_size = 400

exp_sarge = {}
exp_sarge.click_function = 'explain_sarge'
exp_sarge.function_owner = self
exp_sarge.label = '?'
exp_sarge.position = {-5, 0.6, 3}
exp_sarge.width = 400
exp_sarge.height = 400
exp_sarge.font_size = 400

add_sarge = {}
add_sarge.click_function = 'select_sarge'
add_sarge.function_owner = self
add_sarge.label = ' '
add_sarge.position = {-6, 0.6, 3}
add_sarge.width = 400
add_sarge.height = 400
add_sarge.font_size = 400





exp_psi = {}
exp_psi.click_function = 'explain_psionic'
exp_psi.function_owner = self
exp_psi.label = 'Psionic Corruption'
exp_psi.position = {-3.3, 0.6, 6.7}
exp_psi.width = 2800
exp_psi.height = 300
exp_psi.font_size = 300

add_psi = {}
add_psi.click_function = 'select_psionic'
add_psi.function_owner = self
add_psi.label = ' '
add_psi.position = {-6.5, 0.6, 6.7}
add_psi.width = 300
add_psi.height = 300
add_psi.font_size = 300

exp_comn = {}
exp_comn.click_function = 'explain_communication'
exp_comn.function_owner = self
exp_comn.label = 'Communication Silence'
exp_comn.position = {3.9, 0.6, 6.7}
exp_comn.width = 3100
exp_comn.height = 300
exp_comn.font_size = 300

add_comn = {}
add_comn.click_function = 'select_communication'
add_comn.function_owner = self
add_comn.label = ' '
add_comn.position = {0.4, 0.6, 6.7}
add_comn.width = 300
add_comn.height = 300
add_comn.font_size = 300

exp_rand = {}
exp_rand.click_function = 'explain_random'
exp_rand.function_owner = self
exp_rand.label = 'Random Roles'
exp_rand.position = {0.5, 0.6, 5.7}
exp_rand.width = 3100
exp_rand.height = 300
exp_rand.font_size = 300

add_rand = {}
add_rand.click_function = 'select_random'
add_rand.function_owner = self
add_rand.label = ' '
add_rand.position = {-3, 0.6, 5.7}
add_rand.width = 300
add_rand.height = 300
add_rand.font_size = 300

function onLoad(gameObject, player)
  self.createButton(add_avalon)
  self.createButton(add_plot)
  self.createButton(add_addplot)
  self.createButton(add_blind)
  self.createButton(add_inq)
  self.createButton(add_trapper)
  self.createButton(add_choice)
  self.createButton(add_sarge)

  self.createButton(exp_sarge)
  self.createButton(exp_choice)
  self.createButton(exp_trapper)
  self.createButton(exp_inq)
  self.createButton(exp_avalon)
  self.createButton(exp_plot)
  self.createButton(exp_addplot)
  self.createButton(exp_blind)

  self.createButton(add_psi)
  self.createButton(exp_psi)

  self.createButton(add_comn)
  self.createButton(exp_comn)

  self.createButton(add_rand)
  self.createButton(exp_rand)

  Timer.create({identifier = "ID", function_name = 'setChecks', delay = 0.2 })
end

function setChecks()
  Global.call("updateRoles", {})

  if Global.getVar('choiceMode') then
    self.editButton({index = 6, label = label_check})
  else
    self.editButton({index = 6, label = ' '})
  end

  if Global.getVar('sergeantMode') then
    self.editButton({index = 7, label = label_check})
  else
    self.editButton({index = 7, label = ' '})
  end

  if Global.getVar('trapperMode') then
    self.editButton({index = 5, label = label_check})
  else
    self.editButton({index = 5, label = ' '})
  end

  if Global.getVar('inquisitorMode') then
    self.editButton({index = 4, label = label_check})
  else
    self.editButton({index = 4, label = ' '})
  end

  if Global.getVar('avalon_codename') then
    self.editButton({index = 0, label = label_check})
  else
    self.editButton({index = 0, label = ' '})
  end

  if Global.getVar('plotCards') then
    self.editButton({index = 1, label = label_check})
  else
    self.editButton({index = 1, label = ' '})
  end

  if Global.getVar('additonalPlots') then
    self.editButton({index = 2, label = label_check})
  else
    self.editButton({index = 2, label = ' '})
  end

  if Global.getVar('blindMode') then
    self.editButton({index = 3, label = label_check})
  else
    self.editButton({index = 3, label = ' '})
  end

  if Global.getVar('psionic_corruption') then
    self.editButton({index = 16, label = label_check})
  else
    self.editButton({index = 16, label = ' '})
  end

  if Global.getVar('communication_silence') then
    self.editButton({index = 18, label = label_check})
  else
    self.editButton({index = 18, label = ' '})
  end

  if Global.getVar('randomRoles') then
    self.editButton({index = 20, label = label_check})
  else
    self.editButton({index = 20, label = ' '})
  end

  Global.call("updateRoles", {})
end

function select_random(gameObject, player)
  if getPlayerFromColor(player).admin == false then
    return
  end
  if Global.getVar('randomRoles') then
    Global.setVar("randomRoles", false)
    self.editButton({index = 20, label = ' '})
  else
    Global.setVar("randomRoles", true)
    self.editButton({index = 20, label = label_check})
  end
  Global.call("updateRoles", {})
end

function explain_random(gameObject, player)
  printToColor("-----------------------------", player, {0,0,0})
  printToColor("Roles will be randomly chosen and dealt to everyone. You'll never know who might be out there... Selected roles will not be inculded in the random roles. For any role that requires another role to work, thet role will also be out there.", player, {1,1,0})
  printToColor("-----------------------------", player, {0,0,0})
end


function select_choice(gameObject, player)
  if getPlayerFromColor(player).admin == false then
    return
  end
  if Global.getVar('choiceMode') then
    Global.setVar("choiceMode", false)
    self.editButton({index = 6, label = ' '})
  else
    Global.setVar("choiceMode", true)
    self.editButton({index = 6, label = label_check})
  end
  Global.call("updateRoles", {})
end

function select_sarge(gameObject, player)
  if getPlayerFromColor(player).admin == false then
    return
  end
  if Global.getVar('sergeantMode') then
    Global.setVar("sergeantMode", false)
    self.editButton({index = 7, label = ' '})
  else
    Global.setVar("sergeantMode", true)
    self.editButton({index = 7, label = label_check})
  end
  Global.call("updateRoles", {})
end

function select_psionic(gameObject, player)
  if getPlayerFromColor(player).admin == false then
    return
  end
  if Global.getVar('psionic_corruption') then
    Global.setVar("psionic_corruption", false)
    self.editButton({index = 16, label = ' '})
  else
    Global.setVar("psionic_corruption", true)
    self.editButton({index = 16, label = label_check})
  end
  Global.call("updateRoles", {})
end

function select_communication(gameObject, player)
  if getPlayerFromColor(player).admin == false then
    return
  end
  if Global.getVar('communication_silence') then
    Global.setVar("communication_silence", false)
    self.editButton({index = 18, label = ' '})
  else
    Global.setVar("communication_silence", true)
    self.editButton({index = 18, label = label_check})
  end
  Global.call("updateRoles", {})
end

function explain_communication(gameObject, player)
  printToColor("-----------------------------", player, {0,0,0})
  printToColor("The Leader must choose whether or not to show the results of the mission, however only a limited number of missions may break Communication Silence. [66ff00][i]Submitted by GiantDwarf01[/i]", player, {1,1,0})
  printToColor("-----------------------------", player, {0,0,0})
end

function explain_psionic(gameObject, player)
  printToColor("-----------------------------", player, {0,0,0})
  printToColor("One Spy will think they are part of the Resistance. Their Success cards will be turned into a Fail after they've been played. [66ff00][i]Submitted by Kip Drody[/i]", player, {1,1,0})
  printToColor("-----------------------------", player, {0,0,0})
end

function explain_sarge(gameObject, player)
  printToColor("-----------------------------", player, {0,0,0})
  printToColor("A Sergeant is assigned by the leader on every mission. After the players place their mission cards, the Sergeant may choose to force one of them to switch the card they played with the opposite card - A fail into a Success and vise versa. [FF00FF]Sergeant Mode is not compatable with roles that add other mission cards - Chief and Hunter, Rogues, and Reversers.", player, {1,1,0})
  printToColor("-----------------------------", player, {0,0,0})
end

function explain_choice(gameObject, player)
  printToColor("-----------------------------", player, {0,0,0})
  printToColor("Targeted Mode allows the leader to choose which Mission to attempt instead of going in order. When everyone votes they're voting on both the Team Members and the current Mission", player, {1,1,0})
  printToColor("-----------------------------", player, {0,0,0})
end

function explain_trapper(gameObject, player)
  printToColor("-----------------------------", player, {0,0,0})
  printToColor("The Trapper module adds an extra Team Token to each mission. After all the mission members play their Mission Card, instead of immediately resolving the Mission, the Leader can choose one person and inspect the card they played and remove it from the mission.", player, {1,1,0})
  printToColor("-----------------------------", player, {0,0,0})
end

function select_trapper(gameObject, player)
  if getPlayerFromColor(player).admin == false then
    return
  end
  if Global.getVar('trapperMode') then
    Global.setVar("trapperMode", false)
    self.editButton({index = 5, label = ' '})
  else
    Global.setVar("trapperMode", true)
    self.editButton({index = 5, label = label_check})
  end
  Global.call("updateRoles", {})
end

function select_pretender(gameObject, player)
  if getPlayerFromColor(player).admin == false then
    return
  end
  if Global.getVar('pretender_knows') then
    Global.setVar("pretender_knows", false)
    self.editButton({index = 6, label = ' '})
  else
    Global.setVar("pretender_knows", true)
    self.editButton({index = 6, label = label_check})
  end
  Global.call("updateRoles", {})
end

function select_defector(gameObject, player)
  if getPlayerFromColor(player).admin == false then
    return
  end
  if Global.getVar('defectors_know') then
    Global.setVar("defectors_know", false)
    self.editButton({index = 5, label = ' '})
  else
    Global.setVar("defectors_know", true)
    self.editButton({index = 5, label = label_check})
  end
  Global.call("updateRoles", {})
end

function select_inq(gameObject, player)
  if getPlayerFromColor(player).admin == false then
    return
  end
  if Global.getVar('inquisitorMode') then
    Global.setVar("inquisitorMode", false)
    self.editButton({index = 4, label = ' '})
  else
    Global.setVar("inquisitorMode", true)
    self.editButton({index = 4, label = label_check})
  end
  Global.call("updateRoles", {})
end

function select_avalon(gameObject, player)
  if getPlayerFromColor(player).admin == false then
    return
  end
  if Global.getVar('avalon_codename') then
    Global.setVar("avalon_codename", false)
    self.editButton({index = 0, label = ' '})
  else
    Global.setVar("avalon_codename", true)
    self.editButton({index = 0, label = label_check})
    self.setState(2)
    getObjectFromGUID('09de40').setState(2)
    getObjectFromGUID('18eb21').setState(2)
  end
  Global.call("updateRoles", {})
end

function select_plot(gameObject, player)
  if getPlayerFromColor(player).admin == false then
    return
  end
  if Global.getVar('plotCards') then
    Global.setVar("plotCards", false)
    self.editButton({index = 1, label = ' '})
    if Global.getVar('additonalPlots') then
      Global.setVar("additonalPlots", false)
      self.editButton({index = 2, label = ' '})
    end
  else
    Global.setVar("plotCards", true)
    self.editButton({index = 1, label = label_check})
  end
  Global.call("updateRoles", {})
end

function select_addplot(gameObject, player)
  if getPlayerFromColor(player).admin == false then
    return
  end
  if Global.getVar('additonalPlots') then
    Global.setVar("additonalPlots", false)
    self.editButton({index = 2, label = ' '})
  else
    Global.setVar("additonalPlots", true)
    self.editButton({index = 2, label = label_check})

    if Global.getVar('plotCards') == false then
      Global.setVar("plotCards", true)
      self.editButton({index = 1, label = label_check})
    end
  end
  Global.call("updateRoles", {})
end

function select_blind(gameObject, player)
  if getPlayerFromColor(player).admin == false then
    return
  end
  if Global.getVar('blindMode') then
    Global.setVar("blindMode", false)
    self.editButton({index = 3, label = ' '})
  else
    Global.setVar("blindMode", true)
    self.editButton({index = 3, label = label_check})
  end
  Global.call("updateRoles", {})
end

function explain_defector(gameObject, player)
  printToColor("-----------------------------", player, {0,0,0})
  printToColor("The Defectors can know who the other Defector is. [ff00ff]Requires the Defector roles in the game.", player, {1,1,0})
  printToColor("-----------------------------", player, {0,0,0})
end

function explain_pretender(gameObject, player)
  printToColor("-----------------------------", player, {0,0,0})
  printToColor("The Pretender can know who the Deep Agent is. [ff00ff]Requires the Pretender and Deep Agent roles in the game.", player, {1,1,0})
  printToColor("-----------------------------", player, {0,0,0})
end

function explain_inq(gameObject, player)
  printToColor("-----------------------------", player, {0,0,0})
  printToColor("The Inquisitor is a public role that lets a player find the affliation of another member after missions 2, 3, and 4. The Inquisitor role is then passed to the person that was invesigated. Anyone who becomes a Inquisitor cannot be investigated.", player, {1,1,0})
  printToColor("-----------------------------", player, {0,0,0})
end

function explain_blind(gameObject, player)
  printToColor("-----------------------------", player, {0,0,0})
  printToColor("Makes it so the Spies are all blind and none of them know each other.", player, {1,1,0})
  printToColor("-----------------------------", player, {0,0,0})
end

function explain_addplot(gameObject, player)
  printToColor("-----------------------------", player, {0,0,0})
  printToColor('Adds 4 extra Plot Cards.', player, {1,1,0})
  printToColor("-----------------------------", player, {0,0,0})
end

function explain_plot(gameObject, player)
  printToColor("-----------------------------", player, {0,0,0})
  printToColor("During the Team Building phase, the leader can deal out Plot Cards to others. Plot Cards with the Leader Symbol (the Star) are immediately used and discarded, the one with the number 1 can be held until the player with it wants to play it, and finally the ones with the Square activates and remains in play the entire game. [ff00ff]It's suggested that during the mission phase you place your Mission Card in front of you and see if anyone wishes to activate a plot card before placing them on the Played Mission Cards mat.", player, {1,1,0})
  printToColor("-----------------------------", player, {0,0,0})
end

function explain_avalon(gameObject, player)
  printToColor("-----------------------------", player, {0,0,0})
  printToColor('Applies an Avalon theme to some parts of the game, including the roles of Commander (Merlin), Body Guard (Percival), Defectors (Lancelot), False Commander (Morgana), Blind Spy (Oberon), Deep Agent (Mordred), along with Loyal Servants of Arthur and Minions of Mordred for standard roles.', player, {1,1,0})
  printToColor("-----------------------------", player, {0,0,0})
end

function getPlayerFromColor(player_color)
  if player_color == "White" then
    return Player.White
  elseif player_color == "Brown" then
    return Player.Brown
  elseif player_color == "Red" then
    return Player.Red
  elseif player_color == "Orange" then
    return Player.Orange
  elseif player_color == "Yellow" then
    return Player.Yellow
  elseif player_color == "Green" then
    return Player.Green
  elseif player_color == "Teal" then
    return Player.Teal
  elseif player_color == "Blue" then
    return Player.Blue
  elseif player_color == "Purple" then
    return Player.Purple
  elseif player_color == "Pink" then
    return Player.Pink
  end
end